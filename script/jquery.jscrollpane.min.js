/*!
 * jScrollPane - v2.0.14 - 2013-05-01
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
(function(b,a,c){b.fn.jScrollPane=function(e){function d(C,M){var ax,O=this,W,ah,u,aj,R,X,x,p,ay,aD,at,h,H,g,i,Y,S,an,V,r,z,ao,ad,ak,F,k,ar,aw,w,au,aG,ag=true,N=true,aF=false,j=false,am=C.clone(false,false).empty(),aa=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";aG=C.css("paddingTop")+" "+C.css("paddingRight")+" "+C.css("paddingBottom")+" "+C.css("paddingLeft");function ap(){W.css("overflow","auto");var s=M.contentWidth||W[0].scrollWidth,aH=W[0].scrollHeight;W.css("overflow","");return{width:s,height:aH}}function aq(aQ){var aL,aN,aM,aJ,aH,aP,aO=false,aK=false;ax=aQ;if(W===c){aH=C.scrollTop();aP=C.scrollLeft();C.css({overflow:"hidden",padding:0});ah=C.innerWidth();u=C.innerHeight();C.width(ah);W=b('<div class="jspPane" />').css("padding",aG).append(C.children());aj=b('<div class="jspContainer" />').css({width:ah+"px",height:u+"px"}).append(W).appendTo(C)}else{C.css("width","");aj.css("width","");aO=ax.stickToBottom&&J();aK=ax.stickToRight&&A();aJ=C.innerWidth()!=ah||C.outerHeight()!=u;if(aJ){ah=C.innerWidth();u=C.innerHeight();aj.css({width:ah+"px",height:u+"px"})}if(!aJ&&R==ap().width&&W.outerHeight()==X){C.width(ah);C.trigger("jsp-initialised",[aD||ay]);return}W.css("width","");C.width(ah);aj.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}var aI=ap();R=aI.width;X=aI.height;x=R/ah;p=X/u;ay=ax.verticalScrollDisabled?false:(p>1);aD=ax.horizontalScrollDisabled?false:(x>1);if(!(aD||ay)){C.removeClass("jspScrollable");W.css({top:0,width:aj.width()});m();D();P();v()}else{C.addClass("jspScrollable");aL=ax.maintainPosition&&(H||Y);if(aL){aN=aB();aM=az()}aE();y();E();if(aL){L(aK?(R-ah):aN,false);K(aO?(X-u):aM,false)}I();ae();al();if(ax.enableKeyboardNavigation){Q()}if(ax.clickOnTrack){o()}B();if(ax.hijackInternalLinks){l()}}if(ax.autoReinitialise&&!au){au=setInterval(function(){aq(ax)},ax.autoReinitialiseDelay)}else{if(!ax.autoReinitialise&&au){clearInterval(au)}}aH&&C.scrollTop(0)&&K(aH,false);aP&&C.scrollLeft(0)&&L(aP,false);C.trigger("jsp-initialised",[aD||ay])}function aE(){if(ay){aj.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />')));S=aj.find(">.jspVerticalBar");an=S.find(">.jspTrack");at=an.find(">.jspDrag");if(ax.showArrows){ao=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",aC(0,-1)).bind("click.jsp",aA);ad=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",aC(0,1)).bind("click.jsp",aA);if(ax.arrowScrollOnHover){ao.bind("mouseover.jsp",aC(0,-1,ao));ad.bind("mouseover.jsp",aC(0,1,ad))}ai(an,ax.verticalArrowPositions,ao,ad)}r=u;aj.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){r-=b(this).outerHeight()});at.hover(function(){at.addClass("jspHover")},function(){at.removeClass("jspHover")}).bind("mousedown.jsp",function(aH){b("html").bind("dragstart.jsp selectstart.jsp",aA);at.addClass("jspActive");var s=aH.pageY-at.position().top;b("html").bind("mousemove.jsp",function(aI){T(aI.pageY-s,false)}).bind("mouseup.jsp mouseleave.jsp",av);return false});n()}}function n(){an.height(r+"px");H=0;V=ax.verticalGutter+an.outerWidth();W.width(ah-V);try{if(S.position().left===0){W.css("margin-left",V+"px")}}catch(s){}}function y(){if(aD){aj.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />')));ak=aj.find(">.jspHorizontalBar");F=ak.find(">.jspTrack");g=F.find(">.jspDrag");if(ax.showArrows){aw=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",aC(-1,0)).bind("click.jsp",aA);w=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",aC(1,0)).bind("click.jsp",aA);if(ax.arrowScrollOnHover){aw.bind("mouseover.jsp",aC(-1,0,aw));w.bind("mouseover.jsp",aC(1,0,w))}ai(F,ax.horizontalArrowPositions,aw,w)}g.hover(function(){g.addClass("jspHover")},function(){g.removeClass("jspHover")}).bind("mousedown.jsp",function(aH){b("html").bind("dragstart.jsp selectstart.jsp",aA);g.addClass("jspActive");var s=aH.pageX-g.position().left;b("html").bind("mousemove.jsp",function(aI){U(aI.pageX-s,false)}).bind("mouseup.jsp mouseleave.jsp",av);return false});k=aj.innerWidth();af()}}function af(){aj.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){k-=b(this).outerWidth()});F.width(k+"px");Y=0}function E(){if(aD&&ay){var aH=F.outerHeight(),s=an.outerWidth();r-=aH;b(ak).find(">.jspCap:visible,>.jspArrow").each(function(){k+=b(this).outerWidth()});k-=s;u-=s;ah-=aH;F.parent().append(b('<div class="jspCorner" />').css("width",aH+"px"));n();af()}if(aD){W.width(aj.outerWidth()+"px")}X=W.outerHeight();p=X/u;if(aD){ar=Math.ceil(1/x*k);if(ar>ax.horizontalDragMaxWidth){ar=ax.horizontalDragMaxWidth}else{if(ar<ax.horizontalDragMinWidth){ar=ax.horizontalDragMinWidth}}g.width(ar+"px");i=k-ar;ac(Y)}if(ay){z=Math.ceil(1/p*r);if(z>ax.verticalDragMaxHeight){z=ax.verticalDragMaxHeight}else{if(z<ax.verticalDragMinHeight){z=ax.verticalDragMinHeight}}at.height(z+"px");h=r-z;ab(H)}}function ai(aI,aK,aH,s){var aM="before",aJ="after",aL;if(aK=="os"){aK=/Mac/.test(navigator.platform)?"after":"split"}if(aK==aM){aJ=aK}else{if(aK==aJ){aM=aK;aL=aH;aH=s;s=aL}}aI[aM](aH)[aJ](s)}function aC(aH,s,aI){return function(){G(aH,s,this,aI);this.blur();return false}}function G(aK,aJ,aN,aM){aN=b(aN).addClass("jspActive");var aL,aI,aH=true,s=function(){if(aK!==0){O.scrollByX(aK*ax.arrowButtonSpeed)}if(aJ!==0){O.scrollByY(aJ*ax.arrowButtonSpeed)}aI=setTimeout(s,aH?ax.initialDelay:ax.arrowRepeatFreq);aH=false};s();aL=aM?"mouseout.jsp":"mouseup.jsp";aM=aM||b("html");aM.bind(aL,function(){aN.removeClass("jspActive");aI&&clearTimeout(aI);aI=null;aM.unbind(aL)})}function o(){v();if(ay){an.bind("mousedown.jsp",function(aM){if(aM.originalTarget===c||aM.originalTarget==aM.currentTarget){var aK=b(this),aN=aK.offset(),aL=aM.pageY-aN.top-H,aI,aH=true,s=function(){var aQ=aK.offset(),aR=aM.pageY-aQ.top-z/2,aO=u*ax.scrollPagePercent,aP=h*aO/(X-u);if(aL<0){if(H-aP>aR){O.scrollByY(-aO)}else{T(aR)}}else{if(aL>0){if(H+aP<aR){O.scrollByY(aO)}else{T(aR)}}else{aJ();return}}aI=setTimeout(s,aH?ax.initialDelay:ax.trackClickRepeatFreq);aH=false},aJ=function(){aI&&clearTimeout(aI);aI=null;b(document).unbind("mouseup.jsp",aJ)};s();b(document).bind("mouseup.jsp",aJ);return false}})}if(aD){F.bind("mousedown.jsp",function(aM){if(aM.originalTarget===c||aM.originalTarget==aM.currentTarget){var aK=b(this),aN=aK.offset(),aL=aM.pageX-aN.left-Y,aI,aH=true,s=function(){var aQ=aK.offset(),aR=aM.pageX-aQ.left-ar/2,aO=ah*ax.scrollPagePercent,aP=i*aO/(R-ah);if(aL<0){if(Y-aP>aR){O.scrollByX(-aO)}else{U(aR)}}else{if(aL>0){if(Y+aP<aR){O.scrollByX(aO)}else{U(aR)}}else{aJ();return}}aI=setTimeout(s,aH?ax.initialDelay:ax.trackClickRepeatFreq);aH=false},aJ=function(){aI&&clearTimeout(aI);aI=null;b(document).unbind("mouseup.jsp",aJ)};s();b(document).bind("mouseup.jsp",aJ);return false}})}}function v(){if(F){F.unbind("mousedown.jsp")}if(an){an.unbind("mousedown.jsp")}}function av(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(at){at.removeClass("jspActive")}if(g){g.removeClass("jspActive")}}function T(s,aH){if(!ay){return}if(s<0){s=0}else{if(s>h){s=h}}if(aH===c){aH=ax.animateScroll}if(aH){O.animate(at,"top",s,ab)}else{at.css("top",s);ab(s)}}function ab(aH){if(aH===c){aH=at.position().top}aj.scrollTop(0);H=aH;var aK=H===0,aI=H==h,aJ=aH/h,s=-aJ*(X-u);if(ag!=aK||aF!=aI){ag=aK;aF=aI;C.trigger("jsp-arrow-change",[ag,aF,N,j])}t(aK,aI);W.css("top",s);C.trigger("jsp-scroll-y",[-s,aK,aI]).trigger("scroll")}function U(aH,s){if(!aD){return}if(aH<0){aH=0}else{if(aH>i){aH=i}}if(s===c){s=ax.animateScroll}if(s){O.animate(g,"left",aH,ac)}else{g.css("left",aH);ac(aH)}}function ac(aH){if(aH===c){aH=g.position().left}aj.scrollTop(0);Y=aH;var aK=Y===0,aJ=Y==i,aI=aH/i,s=-aI*(R-ah);if(N!=aK||j!=aJ){N=aK;j=aJ;C.trigger("jsp-arrow-change",[ag,aF,N,j])}q(aK,aJ);W.css("left",s);C.trigger("jsp-scroll-x",[-s,aK,aJ]).trigger("scroll")}function t(aH,s){if(ax.showArrows){ao[aH?"addClass":"removeClass"]("jspDisabled");ad[s?"addClass":"removeClass"]("jspDisabled")}}function q(aH,s){if(ax.showArrows){aw[aH?"addClass":"removeClass"]("jspDisabled");w[s?"addClass":"removeClass"]("jspDisabled")}}function K(s,aH){var aI=s/(X-u);T(aI*h,aH)}function L(aH,s){var aI=aH/(R-ah);U(aI*i,s)}function Z(aU,aP,aI){var aM,aJ,aK,s=0,aT=0,aH,aO,aN,aR,aQ,aS;try{aM=b(aU)}catch(aL){return}aJ=aM.outerHeight();aK=aM.outerWidth();aj.scrollTop(0);aj.scrollLeft(0);while(!aM.is(".jspPane")){s+=aM.position().top;aT+=aM.position().left;aM=aM.offsetParent();if(/^body|html$/i.test(aM[0].nodeName)){return}}aH=az();aN=aH+u;if(s<aH||aP){aQ=s-ax.verticalGutter}else{if(s+aJ>aN){aQ=s-u+aJ+ax.verticalGutter}}if(aQ){K(aQ,aI)}aO=aB();aR=aO+ah;if(aT<aO||aP){aS=aT-ax.horizontalGutter}else{if(aT+aK>aR){aS=aT-ah+aK+ax.horizontalGutter}}if(aS){L(aS,aI)}}function aB(){return -W.position().left}function az(){return -W.position().top}function J(){var s=X-u;return(s>20)&&(s-az()<10)}function A(){var s=R-ah;return(s>20)&&(s-aB()<10)}function ae(){aj.unbind(aa).bind(aa,function(aK,aL,aJ,aH){var aI=Y,s=H;O.scrollBy(aJ*ax.mouseWheelSpeed,-aH*ax.mouseWheelSpeed,false);return(ax.documentScrollDisabled?false:aI==Y&&s==H)})}function m(){aj.unbind(aa)}function aA(){return false}function I(){W.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(s){Z(s.target,false)})}function D(){W.find(":input,a").unbind("focus.jsp")}function Q(){var s,aH,aJ=[];aD&&aJ.push(ak[0]);ay&&aJ.push(S[0]);W.focus(function(){C.focus()});C.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(aM){if(aM.target!==this&&!(aJ.length&&b(aM.target).closest(aJ).length)){return}var aL=Y,aK=H;switch(aM.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=aM.keyCode;aI();break;case 35:K(X-u);s=null;break;case 36:K(0);s=null;break}aH=aM.keyCode==s&&aL!=Y||aK!=H;return !aH}).bind("keypress.jsp",function(aK){if(aK.keyCode==s){aI()}return !aH});if(ax.hideFocus){C.css("outline","none");if("hideFocus" in aj[0]){C.attr("hideFocus",true)}}else{C.css("outline","");if("hideFocus" in aj[0]){C.attr("hideFocus",false)}}function aI(){var aL=Y,aK=H;switch(s){case 40:O.scrollByY(ax.keyboardSpeed,false);break;case 38:O.scrollByY(-ax.keyboardSpeed,false);break;case 34:case 32:O.scrollByY(u*ax.scrollPagePercent,false);break;case 33:O.scrollByY(-u*ax.scrollPagePercent,false);break;case 39:O.scrollByX(ax.keyboardSpeed,false);break;case 37:O.scrollByX(-ax.keyboardSpeed,false);break}aH=aL!=Y||aK!=H;return aH}}function P(){C.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function B(){if(location.hash&&location.hash.length>1){var aJ,aH,aI=escape(location.hash.substr(1));try{aJ=b("#"+aI+', a[name="'+aI+'"]')}catch(s){return}if(aJ.length&&W.find(aI)){if(aj.scrollTop()===0){aH=setInterval(function(){if(aj.scrollTop()>0){Z(aJ,true);b(document).scrollTop(aj.position().top);clearInterval(aH)}},50)}else{Z(aJ,true);b(document).scrollTop(aj.position().top)}}}}function l(){if(b(document.body).data("jspHijack")){return}b(document.body).data("jspHijack",true);b(document.body).delegate("a[href*=#]","click",function(s){var aH=this.href.substr(0,this.href.indexOf("#")),aJ=location.href,aN,aO,aI,aL,aK,aM;if(location.href.indexOf("#")!==-1){aJ=location.href.substr(0,location.href.indexOf("#"))}if(aH!==aJ){return}aN=escape(this.href.substr(this.href.indexOf("#")+1));aO;try{aO=b("#"+aN+', a[name="'+aN+'"]')}catch(aP){return}if(!aO.length){return}aI=aO.closest(".jspScrollable");aL=aI.data("jsp");aL.scrollToElement(aO,true);if(aI[0].scrollIntoView){aK=b(a).scrollTop();aM=aO.offset().top;if(aM<aK||aM>aK+b(a).height()){aI[0].scrollIntoView()}}s.preventDefault()})}function al(){var aI,aH,aK,aJ,aL,s=false;aj.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(aM){var aN=aM.originalEvent.touches[0];aI=aB();aH=az();aK=aN.pageX;aJ=aN.pageY;aL=false;s=true}).bind("touchmove.jsp",function(aP){if(!s){return}var aO=aP.originalEvent.touches[0],aN=Y,aM=H;O.scrollTo(aI+aK-aO.pageX,aH+aJ-aO.pageY);aL=aL||Math.abs(aK-aO.pageX)>5||Math.abs(aJ-aO.pageY)>5;return aN==Y&&aM==H}).bind("touchend.jsp",function(aM){s=false}).bind("click.jsp-touchclick",function(aM){if(aL){aL=false;return false}})}function f(){var s=az(),aH=aB();C.removeClass("jspScrollable").unbind(".jsp");C.replaceWith(am.append(W.children()));am.scrollTop(s);am.scrollLeft(aH);if(au){clearInterval(au)}}b.extend(O,{reinitialise:function(aH){aH=b.extend({},ax,aH);aq(aH)},scrollToElement:function(aI,aH,s){Z(aI,aH,s)},scrollTo:function(aI,s,aH){L(aI,aH);K(s,aH)},scrollToX:function(aH,s){L(aH,s)},scrollToY:function(s,aH){K(s,aH)},scrollToPercentX:function(aH,s){L(aH*(R-ah),s)},scrollToPercentY:function(aH,s){K(aH*(X-u),s)},scrollBy:function(aH,s,aI){O.scrollByX(aH,aI);O.scrollByY(s,aI)},scrollByX:function(s,aI){var aH=aB()+Math[s<0?"floor":"ceil"](s),aJ=aH/(R-ah);U(aJ*i,aI)},scrollByY:function(s,aI){var aH=az()+Math[s<0?"floor":"ceil"](s),aJ=aH/(X-u);T(aJ*h,aI)},positionDragX:function(s,aH){U(s,aH)},positionDragY:function(aH,s){T(aH,s)},animate:function(aH,aK,s,aJ){var aI={};aI[aK]=s;aH.animate(aI,{duration:ax.animateDuration,easing:ax.animateEase,queue:false,step:aJ})},getContentPositionX:function(){return aB()},getContentPositionY:function(){return az()},getContentWidth:function(){return R},getContentHeight:function(){return X},getPercentScrolledX:function(){return aB()/(R-ah)},getPercentScrolledY:function(){return az()/(X-u)},getIsScrollableH:function(){return aD},getIsScrollableV:function(){return ay},getContentPane:function(){return W},scrollToBottom:function(s){T(h,s)},hijackInternalLinks:b.noop,destroy:function(){f()}});aq(M)}e=b.extend({},b.fn.jScrollPane.defaults,e);b.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){e[this]=e[this]||e.speed});return this.each(function(){var f=b(this),g=f.data("jsp");if(g){g.reinitialise(e)}else{b("script",f).filter('[type="text/javascript"],:not([type])').remove();g=new d(f,e);f.data("jsp",g)}})};b.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,verticalScrollDisabled:false,horizontalScrollDisabled:false,mouseWheelSpeed:3,documentScrollDisabled:false,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);